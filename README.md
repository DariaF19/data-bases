Лабораторная работа 5.

Предметная область.

База данных по комплексу гостиниц имеет следующие таблицы:
1. Отель: id отеля, название отеля, количество звезд.
2. Категория номера: id категории номер, название (люкс, эконом), минимальная площадь по категории.
3. Комната отеля: id комнаты, id отеля, id категории номер, номер комнаты в отеле, стоимость суток проживания.
4. Клиент: id клиента, фио, телефон.
5. Бронирование: id брони, id клиента, дата бронирования
6. Комната в бронировании: id комнаты в брони, id брони, id номера, дата заезда, дата выезда.

Требуется:
1. Добавить внешние ключи.
2. Выдать информацию о клиентах гостиницы “Космос”, проживающих в номерах категории “Люкс” на 1 апреля 2019г.
3. Дать список свободных номеров всех гостиниц на 22 апреля.
4. Дать количество проживающих в гостинице “Космос” на 23 марта по каждой категории номеров
5. Дать список последних проживавших клиентов по всем комнатам гостиницы “Космос”, выехавшим в апреле с указанием даты выезда.
6. Продлить на 2 дня дату проживания в гостинице “Космос” всем клиентам комнат категории “Бизнес”, которые заселились 10 мая.
7. Найти все "пересекающиеся" варианты проживания. Правильное состояние: не может быть забронирован один номер на одну дату несколько раз, т.к. нельзя заселиться нескольким клиентам в один номер.
Записи в таблице room_in_booking с id_room_in_booking = 5 и 2154 являются примером неправильного состояния, которые необходимо найти. Результирующий кортеж выборки должен содержать информацию о двух конфликтующих номерах.
8. Создать бронирование в транзакции.
9. Добавить необходимые индексы для всех таблиц.


Лабораторная работа 6.

Предметная область.

База данных по лекарствам имеет следующие таблицы:
1. Фармакологическая компания: номер компании (идентификатор), названиекомпании, год основания.
2. Дилер компании: номер дилера, номер компании (лекарства которой он продает), ФИО дилера, телефон.
3. Лекарство: номер лекарства, название, длительность стандартного курса лечения в днях.
4. Аптека: номер аптеки, название, рейтинг.
5. Производство лекарств: номер производства, номер компании, номер лекарства, стоимость единицы продукции, оценка качества по 10-балльной шкале.
6. Заказ: номер заказа, номер производства лекарства, номер дилера, номер аптеки, дата заказа, количество данного лекарства в заказе.

Требуется:
1. Добавить внешние ключи.
2. Выдать информацию по всем заказам лекарства “Кордерон” компании “Аргус” с указанием названий аптек, дат, объема заказов.
3. Дать список лекарств компании “Фарма”, на которые не были сделаны заказы до 25 января.
4. Дать минимальный и максимальный баллы лекарств каждой фирмы, которая оформила не менее 120 заказов.
5. Дать списки сделавших заказы аптек по всем дилерам компании “AstraZeneca”. Если у дилера нет заказов, в названии аптеки проставить NULL.
6. Уменьшить на 20% стоимость всех лекарств, если она превышает 3000, а длительность лечения не более 7 дней.
7. Добавить необходимые индексы.
